{% extends '::base.html.twig' %}

{% block body %}

<h2>{{ meeting.date|localizeddate('long', 'short') }}</h2>

<a href="{{ path("mdurys_gupek_meeting_join", { "id": meeting.id }) }}" class="btn btn-success" role="button">
    {{ "form.button.join"|trans }}
</a>
<a href="{{ path("mdurys_gupek_meeting_leave", { "id": meeting.id }) }}" class="btn btn-warning" role="button">
    {{ "form.button.leave"|trans }}
</a>

<p>
    Participants ({{ users|length }}):
    {% for user in users %}
        {{ user.username }}
    {% endfor %}
</p>

{% for bout in bouts %}
    <h3>
        <a href="{{ path("game_show", { "slug": bout.game.slug }) }}">{{ bout.game.name }}</a>
    </h3>

    {% if bout.isNew %}
        <a href="{{ path("bout_join", { "id": bout.id }) }}" class="btn btn-success" role="button">
            {{ "form.button.join"|trans }}
        </a>
        <a href="{{ path("bout_leave", { "id": bout.id }) }}" class="btn btn-warning" role="button">
            {{ "form.button.leave"|trans }}
        </a>
    {% elseif bout.isFinished %}
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th class="col-md-1">{{ "meeting.bout_table.place"|trans }}</th>
                    <th>{{ "meeting.bout_table.player"|trans }}</th>
                    <th class="col-md-1">{{ "meeting.bout_table.points"|trans }}</th>
                    <th class="col-md-1">{{ "meeting.bout_table.win"|trans }}</th>
                </tr>
            </thead>
            <tbody>
                {% for mu in bout.meetingUsers %}
                    <tr>
                        <td>{{ mu.place|localizednumber('ordinal') }}</td>
                        <td>{{ mu.user.username }}</td>
                        <td>{{ mu.score|round(2)|localizednumber }}</td>
                        <td>{% if mu.win > 0 %}{{ mu.win|round(2)|localizednumber }}{% endif %}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endif %}
{% endfor %}

{% endblock %}